with "config";
with "utilada_sys";
@WITH_AUNIT@

library project UtilAda_Unit is
   Version      := "@UTIL_VERSION@";

   Library_Type : Config.Library_Type_Type := external ("UTIL_LIBRARY_TYPE", "@DEFAULT_LIBRARY_TYPE@");

   type Unit_Type is ("none", "ahven-unix", "ahven-windows", "aunit");

   Unit : Unit_Type := "@UTIL_XUNIT_TYPE@";

   for Library_Name use "utilada_unit";
   for Library_Kind use Library_Type;
   for Library_Version use "lib" & Project'Library_Name & ".so." & Version;

   for Library_Dir use "lib/" & "/utilada_unit/" & Project'Library_Kind;
   for Object_Dir use "obj/utilada_unit/" & Project'Library_Kind;

   case Unit is
      when "ahven-unix" =>
          for Source_Dirs use ("src/tests", "src/tests/ahven", "src/tests/ahven/unix");

      when "ahven-windows" =>
          for Source_Dirs use ("src/tests", "src/tests/ahven", "src/tests/ahven/windows");

      when "aunit" =>
          for Source_Dirs use ("src/tests", "src/tests/aunit");

      when "none" =>
          for Source_Dirs use ("src/tests");

   end case;

   package compiler is
      --  Disable some comment style checks to avoid several warnings in Ahven files.
      for Default_Switches ("Ada") use Config.Compiler'Default_Switches ("Ada") & ("-gnaty-cs");
   end compiler;

   package Binder renames Config.Binder;
   package Builder renames Config.Builder;

end UtilAda_Unit;
